// OneSlider Version 1.0
(function(e){var t=function(t,n){function N(){if(c==false){c=true;b["left"]="-"+v+"px";w="next";u=parseInt(u);e(t).find(".one-sliderview").animate(b,200,"swing",function(){clearTimeout(l);e(t).find(".one-slidernavbar").find(".one-slidernav").removeClass("one-activeslide");if(u<S-1){e(t).find(".one-slidepack").eq(u).css({display:"none"});a=u+1;H(u,a)}else if(u>=S-1){e(t).find(".one-slidepack").eq(u).css({display:"none"});a=0;H(u,a);u=0}e(".one-sliderview").css({left:"0px"})})}}function C(){if(c==false){c=true;b["left"]=v+"px";w="prev";u=parseInt(u);e(t).find(".one-sliderview").animate(b,200,"swing",function(){clearTimeout(l);e(t).find(".one-slidernavbar").find(".one-slidernav").removeClass("one-activeslide");if(u>0){e(t).find(".one-slidepack").eq(u).css({display:"none"});a=u-1;H(u,a)}else if(u==0){e(t).find(".one-slidepack").eq(u).css({display:"none"});a=x;H(u,a);u=x}e(".one-sliderview").css({left:"0px"})})}}function k(n){if(!e(n).hasClass("one-activeslide")){if(c==false){c=true;clearTimeout(l);u=e(t).find(".one-activeslide").attr("data-slideindex");u=parseInt(u);a=e(n).attr("data-slideindex");a=parseInt(a);H(u,a)}}}function L(n,r){var i;e(t).find(".one-slidernav").removeClass("one-activeslide");e(t).find(".one-slidernavbar").find("span[data-slideindex='"+r+"']").addClass("one-activeslide");if(w!="prev"){var s=e(t).find(".one-slidernavbar").find(".one-activeslide");var o=e(t).find(".one-slidernavbar").find(".one-slidernav").index(s);if(o>1){for(var u=0;u<o;u++){e(t).find(".one-slidernavbar").find(".one-slidernav").eq(0).appendTo(".one-sliderstation")}}else{i=e(t).find(".one-slidernavbar").find(".one-activeslide").prev();i.appendTo(".one-sliderstation")}}else{i=e(t).find(".one-slidernavbar").find(".one-activeslide");i.appendTo(".one-sliderstation")}}function A(){if(e(t).find(".one-sliderstation").find(".one-slidernav").length){var n=e(t).find(".one-sliderstation").contents();if(w!="prev"){e(t).find(".one-slidernavbar").append(n)}else{e(t).find(".one-slidernavbar").prepend(n)}}}function O(){if(r.HideSliderNav==false){e(t).find(".one-slidernavbar-holder").css({display:"block"})}e(t).find(".one-slidernavbar").find(".one-slidernav").removeClass("one-activeslide");e(t).find(".one-slidernavbar").find(".one-slidernav").eq(0).addClass("one-activeslide");var n=v-48;var i=e(t).find(".one-slidernavbar").find(".one-slidernav").eq(0).width()+5;d=Math.floor((n-5)/i);if(d>S){d=S}var s=d*i-5;var o=(n-s)/2+24;e(t).find(".one-slidernavbar").css({width:s+"px",left:o+"px"})}function M(n,r){c=true;var i;var s;var o;var u=e(t).find(".one-slidepack").eq(r);u.css({"z-index":"9997",display:"block",height:m+"px"});A();if(w=="next"){i="movetoleft";o="swing";s=200;w="none"}else if(w=="prev"){i="movetoright";o="swing";s=200;$prev="none"}else{i=u.find(".one-slidebg").attr("data-bgefin");if(i===undefined){i="fade"}o=u.find(".one-slidebg").attr("data-bgesin");if(o===undefined){o="swing"}s=u.find(".one-slidebg").attr("data-bgdurin");if(s===undefined){s=100}s=parseInt(s)}if(i=="movetoleft"){u.find(".one-slidebg").css({left:v+"px",display:"block"});u.find(".one-slidebg").animate({left:"0"},s,o,function(){e(t).find(".one-slidepack").eq(n).css({display:"none"});P(r)})}else if(i=="movetoright"){u.find(".one-slidebg").css({left:"-"+v+"px",display:"block"});u.find(".one-slidebg").animate({left:"0"},s,o,function(){e(t).find(".one-slidepack").eq(n).css({display:"none"});P(r)})}else if(i=="riseup"){u.find(".one-slidebg").css({top:m+"px",display:"block"});u.find(".one-slidebg").animate({top:"0"},s,o,function(){e(t).find(".one-slidepack").eq(n).css({display:"none"});P(r)})}else if(i=="dropdown"){u.find(".one-slidebg").css({top:"-"+m+"px",display:"block"});u.find(".one-slidebg").animate({top:"0"},s,o,function(){e(t).find(".one-slidepack").eq(n).css({display:"none"});P(r)})}else if(i=="fade"){u.find(".one-slidebg").css({display:"none"});u.find(".one-slidebg").fadeIn(s,o,function(){e(t).find(".one-slidepack").eq(n).css({display:"none"});P(r)})}else{if(i=="explode"){e(t).find(".one-slidepack").eq(n).css({display:"none"})}u.find(".one-slidebg").css({display:"none",width:v+"px",height:m+"px"});u.find(".one-slidebg").show(i,E,s,function(){e(t).find(".one-slidepack").eq(n).css({display:"none"});P(r)})}}function _(n){c=true;h=false;p=true;clearTimeout(l);e(t).find(".one-slidepack").eq(u).find(".one-slidecontentholder").css({display:"none"});e(t).find(".one-slidepack").eq(u).find(".one-subcontent-holder").css({display:"block"});e(t).find(".one-slidepack").eq(u).find(".one-subcontent-holder").css({width:v+"px",height:m+"px"});g=m-30;y=v-80;e(t).find(".one-slidepack").eq(u).find(".one-subcontent-holder").find(".one-subcontent").css({height:g+"px",width:y+"px"});e(t).find(".one-slidepack").eq(u).find(".one-subcontent-holder").find(".one-subcontent").jScrollPane({showArrows:false,maintainPosition:false,autoReinitialise:false}).data("jsp");e(t).find(".one-slidepack").eq(u).find(".one-subcontent-holder").find(".one-backbt").on("click",function(){D(this)})}function D(n){h=true;e(t).find(".one-slidepack").eq(u).find(".one-subcontent-holder").css({display:"none"});e(t).find(".one-slidepack").eq(u).find(".one-slidecontentholder").css({display:"block"})}function P(n){c=true;var r;var i;var s;var o={};var a={};var f=e(t).find(".one-slidepack").eq(n).find(".one-slidecontentholder");e(t).find(".one-slidepack").eq(n).find(".one-slidecontentholder").find(".one-expand").on("click",function(){_(this)});w="none";var l=f.attr("data-pos");if(l=="left"||l=="right"){f.css({height:m+"px"})}var d=f.width();var g=f.height();f.find(".one-emptylayout").css({width:d+"px",height:g+"px"});r=f.attr("data-cefin");if(r===undefined){r="fade"}s=f.attr("data-cesin");if(s===undefined){s="swing"}i=f.attr("data-cdurin");if(i===undefined){i=100}i=parseInt(i);o["display"]="block";if(r=="movetoleft"){if(l=="right"){o[l]="-"+v+"px";a[l]="0px"}else{o["left"]=v+"px";a["left"]="0px"}f.css(o);f.animate(a,i,s,function(){c=false;h=true;if(p==false){B(n)}u=n})}else if(r=="movetoright"){if(l=="right"){o[l]=v+"px";a[l]="0px"}else{o["left"]="-"+v+"px";a["left"]="0px"}f.css(o);f.animate(a,i,s,function(){c=false;h=true;if(p==false){B(n)}u=n})}else if(r=="riseup"){if(l=="bottom"){o["bottom"]="-"+m+"px";a["bottom"]="0px"}else{o["top"]=m+"px";a["top"]="0px"}f.css(o);f.animate(a,i,s,function(){c=false;h=true;if(p==false){B(n)}u=n})}else if(r=="dropdown"){if(l=="bottom"){o["bottom"]=m+"px";a["bottom"]="0px"}else{o["top"]="-"+m+"px";a["top"]="0px"}f.css(o);f.animate(a,i,s,function(){c=false;h=true;if(p==false){B(n)}u=n})}else{f.css({display:"none"});f.show(r,E,i,function(){c=false;h=true;if(p==false){B(n)}u=n})}}function H(n,r){c=true;var i;var s;var o;var u=e(t).find(".one-slidepack").eq(n).find(".one-slidecontentholder");var a=u.attr("data-pos");var f={};f["display"]="none";var l={};i=u.attr("data-cefout");if(i===undefined){i="fade"}o=u.attr("data-cesout");if(o===undefined){o="swing"}s=u.attr("data-cdurout");if(s===undefined){s=100}s=parseInt(s);if(i=="movetoleft"){if(a=="right"){l["right"]=v+"px";f["right"]="0px"}else{l["left"]="-"+v+"px";f["left"]="0px"}u.animate(l,s,o,function(){u.css(f);e(t).find(".one-slidepack").eq(n).css({height:"0px"});e(t).find(".one-slidepack").eq(n).css({"z-index":"9996"});L(n,r);M(n,r)})}else if(i=="movetoright"){if(a=="right"){l["right"]="-"+v+"px";f["right"]="0px"}else{l["left"]=v+"px";f["left"]="0px"}u.animate(l,s,o,function(){u.css(f);e(t).find(".one-slidepack").eq(n).css({height:"0px"});e(t).find(".one-slidepack").eq(n).css({"z-index":"9996"});L(n,r);M(n,r)})}else if(i=="riseup"){if(a=="bottom"){l["bottom"]=m+"px";f["bottom"]="0px"}else{l["top"]="-"+m+"px";f["top"]="0px"}u.animate(l,s,o,function(){u.css(f);e(t).find(".one-slidepack").eq(n).css({height:"0px"});e(t).find(".one-slidepack").eq(n).css({"z-index":"9996"});L(n,r);M(n,r)})}else if(i=="dropdown"){if(a=="bottom"){l["bottom"]="-"+m+"px";f["bottom"]="0px"}else{l["top"]=m+"px";f["top"]="0px"}u.animate(l,s,o,function(){u.css(f);e(t).find(".one-slidepack").eq(n).css({height:"0px"});e(t).find(".one-slidepack").eq(n).css({"z-index":"9996"});L(n,r);M(n,r)})}else{u.fadeOut(s,o,function(){e(t).find(".one-slidepack").eq(n).css({height:"0px"});e(t).find(".one-slidepack").eq(n).css({"z-index":"9996"});L(n,r);M(n,r)})}}function B(n){if(r.AutoPlay==true){f=e(t).find(".one-slidepack").eq(n).attr("data-delay");if(f===undefined){f=r.Delay}f=parseInt(f);l=setTimeout(function(){if(c==false){u=e(t).find(".one-slidernavbar").find(".one-activeslide").attr("data-slideindex");u=parseInt(u);if(u<S-1){a=u+1}else{a=0}H(u,a)}},f)}}function j(){s=F(i.attr("src"));o={width:s.width,height:s.height,top:s.top,left:s.left};i.css(o)}function F(e){var t=new Image;var n,r,i,s,o,u,a,f;t.src=e;n=m/v;r=t.width;i=t.height;s=i/r;if(n>s){u=m;o=m/s}else{u=v*s;o=v}return{width:o,height:u,left:(v-o)/2,top:(m-u)/2}}function q(e,t){var n,t=t||200;return function(){var r=this,i=arguments;clearTimeout(n);n=setTimeout(function(){e.apply(r,Array.prototype.slice.call(i))},t)}}var r=e.extend({},e.fn.oneslider.defaults,n);var i=e(t).find(".one-slidebg").find("img");var s;var o;var u=0;var a;var f;var l;var c=true;var h;var p=false;var d;var v=e(t).find(".one-sliderview").width();var m=v*r.ImgRatio;var g;var y;var b={};var w="none";var E={};e(t).find(".one-sliderview").css({height:m+"px"});var S=e(t).find(".one-slidernavbar").find(".one-slidernav").length;var x=S-1;for(var T=0;T<S;T++){e(t).find(".one-slidernavbar").find(".one-slidernav").eq(T).attr("data-slideindex",T)}if(!e(t).find(".one-sliderstation").length){e(t).append("<div class='one-sliderstation'></div>")}e(t).find(".one-sliderstation").css({display:"none"});O();j();M(-1,0);e(t).find(".one-sliderview").hover(function(){if(h==true){c=true;clearTimeout(l);p=true}},function(){if(h==true){c=false;p=false;B()}});e(t).find(".one-nextslide").on("click",function(){N()});e(t).find(".one-prevslide").on("click",function(){C()});if(r.EnableSwipe==true){e(t).find(".one-sliderview").on("swipeleft",function(){N()});e(t).find(".one-sliderview").on("swiperight",function(){C()})}e(t).find(".one-slidernavbar").find(".one-slidernav").on("click",function(){k(this)});if(r.EnableKeys==true){e(document).keydown(function(e){if(e.keyCode==37){C();return false}else if(e.keyCode==39){N();return false}})}var I=e(window).width();e(window).resize(q(function(){var n=e(window).width();if(I!=n){clearTimeout(l);c=true;h=false;p=false;v=e(t).find(".one-sliderview").width();m=v*r.ImgRatio;e(t).find(".one-slidepack").css({display:"none","z-index":"9996"});e(t).find(".one-sliderview").css({height:m+"px"});e(t).find(".one-slidecontentholder").css({display:"none"});e(t).find(".one-slidecontentholder").each(function(){var t=new Array;t=e(this).attr("data-pos");if(t=="left"||t=="right"){e(this).css({height:m+"px"})}});e(t).find(".one-slidepack").find(".one-subcontent-holder").css({display:"none"});g=m-30;y=v-80;e(t).find(".one-slidepack").find(".one-subcontent-holder").find(".one-subcontent").css({height:g+"px",width:y+"px"});e(t).find(".one-slidepack").find(".one-subcontent-holder").find(".one-subcontent").find(".jspContainer").css({height:g+"px",width:y+"px"});e(t).find(".one-slidepack").find(".one-subcontent-holder").find(".one-subcontent").find(".jspPane").css({width:y+"px"});O();j();L(-1,0);M(-1,0)}I=n}))};e.fn.oneslider=function(n){return this.each(function(r,i){if(e(this).data("oneslider"))return e(this).data("oneslider");var s=new t(this,n);e(this).data("oneslider",s)})};e.fn.oneslider.defaults={ImgRatio:.5625,AutoPlay:false,Delay:3e3,EnableSwipe:true,EnableKeys:true,HideSliderNav:false}})(jQuery)
